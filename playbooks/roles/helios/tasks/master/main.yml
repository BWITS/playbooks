---
- debug: var=helios_master_port
- debug: var=zookeeper_port

- include: zookeeper.yml

- include: exhibitor.yml

- name: Copying Helios master config
  template:
    src:  helios-master
    dest: "{{ helios.master.config }}"

- name: Installing Helios master
  apt:  deb="{{ helios.packages }}/helios-master_{{ helios_version }}_all.deb"

- name: Restarting Helios master service
  service: name=helios-master state=restarted enabled=yes

- name: Checking Helios master HTTP endpoint
  wait_for: port={{ helios_master_port }} timeout=3

- name: Checking Helios master HTTP endpoint
  uri:  url=http://localhost:{{ helios_master_port }} status_code=404
