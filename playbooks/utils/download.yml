---
# Downloads {{ url }} to {{ archive }} and unpacks it to {{ home }} directory
- debug: msg="Downloading '{{ url }}' to '{{ archive }}' and unpacking it to '{{ home }}'"

- name: Downloading {{ name }}
  get_url:
    url:  "{{ url }}"
    dest: "{{ archive }}"

- debug: msg="Deleting '{{ home }}'!"
  when: clean | default(True)

- file: path={{ home }} state=absent
  when: clean | default(True)

- file: path={{ home }} state=directory

- name: Unpacking {{ name }}
  unarchive:
    src:  "{{ archive }}"
    dest: "{{ home }}"
    copy: false
